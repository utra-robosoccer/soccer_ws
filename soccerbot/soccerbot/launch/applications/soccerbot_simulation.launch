<launch>
    <arg name="vision"      default="true" />
    <arg name="darknet"     default="false" />
    <arg name="field_name"  default="robocup" />
    <arg name="frozen"      default="false" />
    <!-- TODO combine all 4 launch files into a single one -->

    <!-- Environment -->
    <include file="$(find soccer_gazebo)/launch/soccerbot_gazebo.launch">
        <arg name="field"   value="$(arg field_name)" />
        <arg name="frozen"  value="$(arg frozen)"/>
    </include>

    <!-- Command for trajectories -->
    <node name="draw_trajectories" pkg="soccer_transforms" type="draw_trajectories" />

    <!-- Model and transformations -->
    <include file="$(find soccer_transforms)/launch/soccer_transforms.launch" />

    <!-- Computer Vision and Camera -->
    <group if="$(arg vision)">
        <include file="$(find soccerbot)/launch/modules/vision.launch">
            <arg name="simulation" value="true" />
            <arg name="darknet" default="$(arg darknet)" />
        </include>
        <include file="$(find soccerbot)/launch/modules/localization.launch">
            <arg name="field_name" default="$(arg field_name)" />
            <arg name="global_frame_id" default="map"/>
            <arg name="scan_topic" default="scan"/>
        </include>
    </group>

    <!-- Control -->

    <!-- TODO (Unassigned) -->

    <!-- RViz -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find soccerbot)/rviz/soccerbot.rviz" respawn="true" />

</launch>
