#! /usr/bin/env python

import soccer_communication.soccer_hardware

if __name__ == "__main__":
    sh = soccer_hardware()
    sh.connectToEmbedded()

    if(sh.isROSmode == True):
        rospy.init_node('soccer_hardware', anonymous=True)
        rospy.Subscriber("robotGoal", RobotGoal, sh.trajectory_callback, queue_size=1)
        pub = rospy.Publisher('soccerbot/imu', Imu, queue_size=1)
        pub2 = rospy.Publisher('soccerbot/robotState', RobotState, queue_size=1)
        rospy.spin()
    else:
        sh.loopTrajectory()

    sys.exit(0)
